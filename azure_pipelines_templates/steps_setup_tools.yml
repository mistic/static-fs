steps:
  - task: NodeTool@0
    inputs:
      versionSpec: '10.15.x'
    displayName: 'Install required Node.js version'
  - task: Npm@1
    inputs:
      command: custom
      customCommand: i -g yarn@1.10.1 node-gyp@5.0.3
    displayName: 'Install required yarn and node-gyp version'
  - script: yarn global add windows-build-tools
    displayName: 'Install required node-gyp build tools for windows'
    condition: eq(variables['Agent.OS'], 'Windows_NT')
  - script: |
      node -v
      yarn -v
      node-gyp -v
    displayName: 'Print tool versions'
  - script: yarn install
    displayName: 'Install dependencies'
