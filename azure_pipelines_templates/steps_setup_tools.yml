steps:
  - task: NodeTool@0
    inputs:
      versionSpec: '10.15.x'
    displayName: 'Install required Node.js version'
  - task: Npm@1
    inputs:
      command: custom
      customCommand: i -g --production windows-build-tools
    condition: eq(variables['Agent.OS'], 'Windows_NT')
    displayName: 'Install required windows build tools for native modules'
  - task: Npm@1
    inputs:
      command: custom
      customCommand: i -g yarn@1.10.1
    displayName: 'Install required yarn'
  - task: Npm@1
    inputs:
      command: custom
      customCommand: i -g node-gyp@5.0.3
    displayName: 'Install required node-gyp version'
  - script: |
      node -v
      yarn -v
      node-gyp -v
    displayName: 'Print tool versions'
  - script: yarn install
    displayName: 'Install dependencies'
