'use strict';

const child_process = require('child_process');

async function runMockedSimpleModuleOnChild() {
  return new Promise((resolve, reject) => {
    const mock_simple_module_proc = child_process.fork('mock_simple_module');

    mock_simple_module_proc.stdout.on('data', (data) => {
      console.log(data);
    });

    mock_simple_module_proc.on('error', (err) => {
      console.error(err);
      reject();
    });

    mock_simple_module_proc.on('close', () => {
      resolve();
    })
  });
}

module.exports = async function run() {
  await runMockedSimpleModuleOnChild();
  console.log('mock_child_process_module has run');
};

